horizontalSpeed = walkSpeed;

horizontalSpeed = horizontalSpeed*drag;

apply_horizontal_movement(); // Also considers collision

isFacingRight = true;