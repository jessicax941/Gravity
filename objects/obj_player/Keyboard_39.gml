horizontalSpeed = walkSpeed;

horizontalSpeed = horizontalSpeed*drag;

apply_movement(); // Also considers collision

isFacingRight = true;